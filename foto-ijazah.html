<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Photo Formal 4x6</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f3f4f6;
      padding: 20px;
    }
    canvas {
      border: 2px solid #444;
      border-radius: 12px;
      cursor: grab;
      background: white;
      margin-bottom: 12px;
    }
    .controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    button {
      padding: 6px 12px;
      border: none;
      border-radius: 8px;
      background: #2563eb;
      color: white;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #1d4ed8;
    }
    #zoomIn, #zoomOut {
      background: #374151;
    }
    #zoomIn:hover, #zoomOut:hover {
      background: #111827;
    }
  </style>
</head>
<body>
  <h2>Phobot Beta V1</h2>
  
  <input type="file" id="upload" accept="image/*"><br><br>

  <div class="controls">
    <button id="zoomOut">âˆ’</button>
    <label for="zoom">Zoom:</label>
    <input type="range" id="zoom" min="0.1" max="3" step="0.01" value="1">
    <button id="zoomIn">+</button>
  </div>

  <canvas id="canvas" width="400" height="600"></canvas><br>
  <button id="download">Download Foto</button>

  <script>
  const upload = document.getElementById("upload");
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");
  const zoomSlider = document.getElementById("zoom");
  const zoomInBtn = document.getElementById("zoomIn");
  const zoomOutBtn = document.getElementById("zoomOut");
  const downloadBtn = document.getElementById("download");

  let uploadedImage = null;
  let dragging = false;
  let posX = 0, posY = 0;
  let lastX = 0, lastY = 0;
  let zoom = 1;
  let targetZoom = 1;

  // Frame overlay untuk panduan (ganti base64 kamu di sini)
  const frame = new Image();
  frame.src = "data:image/png;base64,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AJCBgAWADAQsAGQgYAEgAwELABkIWADIQMACQAYCFgAyELAAkIGABYAMBCwAZCBgASADAQsAGQhYAMhAwAJABgIWADIQsACQgYAFgAwELABkIGABIAMBCwAZCFgAyEDAAkAGAhYAMhCwAJCBgAWADAQsAGQgYAEgAwELABkIWADIQMACQAYCFgAyELAAkIGABYAMBCwAZCBgASADAQsAGQhYAMhAwAJABgIWADIQsAEA0ydgASADAQsAGQhYAMhAwAJABgIWADIQsACQgYAFgAwELABkIGABIAMBCwAZCFgAyEDAAkAGAhYAMhCwAJCBgAWADAQsAGQgYAEgAwELABkIWADIQMACQAYCFgAyELAAkIGABYAMBCwAZCBgASADAQsAGQhYAMhAwAJABgIWADIQsACQgYAFgAwELABkIGABIAMBCwAZCFgAyEDAAkAGAhYAMhCwAJCBgAWADAQsAGQgYAEgAwELABkIWADIQMACQAYCFgAyELAAkIGABYAMBCwAZCBgASADAQsAGQhYAMhAwAJABgIWADIQsACQgYAFgAwELABkIGABIAMBCwAZCFgAyEDAAkAGAhYAMhCwAJCBgAWADAQsAGQgYAEgAwELABkIWADIQMACQAYCFgAyELAAkIGABYAMBCwAZCBgASADAQsAGQhYAMhAwAJABgIWADIQsACQgYAFgAwELABkIGABIAMBCwAZCFgAyEDAAkAGAhYAMhCwAJCBgAWADAQsAGQgYAEgAwELABkIWADIQMACQAYCFgAyELAAkIGABYAMBCwAZCBgASADAQsAGQhYAMhAwAJABgIWADL4TxIUzTO48tstAAAAAElFTkSuQmCC";

  // --- FUNGSI RENDER UTAMA ---
  function drawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (uploadedImage) {
      const w = uploadedImage.width * zoom;
      const h = uploadedImage.height * zoom;
      const x = (canvas.width - w) / 2 + posX;
      const y = (canvas.height - h) / 2 + posY;
      ctx.drawImage(uploadedImage, x, y, w, h);
    }
    ctx.drawImage(frame, 0, 0, canvas.width, canvas.height);
  }

  // --- ANIMASI ZOOM HALUS ---
  function smoothZoom() {
    zoom += (targetZoom - zoom) * 0.05; // kecepatan transisi
    if (Math.abs(targetZoom - zoom) < 0.008) zoom = targetZoom; // berhenti jika sudah dekat
    drawCanvas();
    if (zoom !== targetZoom) requestAnimationFrame(smoothZoom);
  }

  // --- UPLOAD GAMBAR ---
  upload.addEventListener("change", (e) => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function (event) {
      uploadedImage = new Image();
      uploadedImage.onload = () => {
        posX = posY = 0;
        zoom = targetZoom = 1;
        zoomSlider.value = 1;
        drawCanvas();
      };
      uploadedImage.src = event.target.result;
    };
    reader.readAsDataURL(file);
  });

  // --- SLIDER ZOOM ---
  zoomSlider.addEventListener("input", (e) => {
    targetZoom = parseFloat(e.target.value);
    smoothZoom();
  });

  // --- atur skala BUTTON ZOOM + / - ---
  zoomInBtn.addEventListener("click", () => {
    targetZoom = Math.min(targetZoom + 0.008, parseFloat(zoomSlider.max));
    zoomSlider.value = targetZoom.toFixed(2);
    smoothZoom();
  });

  zoomOutBtn.addEventListener("click", () => {
    targetZoom = Math.max(targetZoom - 0.008, parseFloat(zoomSlider.min));
    zoomSlider.value = targetZoom.toFixed(2);
    smoothZoom();
  });

  // --- DRAG POSISI FOTO ---
  canvas.addEventListener("mousedown", (e) => {
    dragging = true;
    lastX = e.offsetX;
    lastY = e.offsetY;
    canvas.style.cursor = "grabbing";
  });
  canvas.addEventListener("mouseup", () => {
    dragging = false;
    canvas.style.cursor = "grab";
  });
  canvas.addEventListener("mouseleave", () => {
    dragging = false;
    canvas.style.cursor = "grab";
  });
  canvas.addEventListener("mousemove", (e) => {
    if (dragging) {
      posX += e.offsetX - lastX;
      posY += e.offsetY - lastY;
      lastX = e.offsetX;
      lastY = e.offsetY;
      drawCanvas();
    }
  });

  // --- SCROLL MOUSE ZOOM ---
  canvas.addEventListener("wheel", (e) => {
    e.preventDefault();
    if (!uploadedImage) return;

    const delta = e.deltaY < 0 ? 0.001 : -0.008;
    const newTargetZoom = Math.min(Math.max(targetZoom + delta, 0.1), 3);

    // Titik kursor sebagai pusat zoom
    const rect = canvas.getBoundingClientRect();
    const cursorX = e.clientX - rect.left;
    const cursorY = e.clientY - rect.top;

    const wBefore = uploadedImage.width * zoom;
    const hBefore = uploadedImage.height * zoom;
    const xBefore = (canvas.width - wBefore) / 2 + posX;
    const yBefore = (canvas.height - hBefore) / 2 + posY;

    const wAfter = uploadedImage.width * newTargetZoom;
    const hAfter = uploadedImage.height * newTargetZoom;
    const xAfter = (canvas.width - wAfter) / 2 + posX;
    const yAfter = (canvas.height - hAfter) / 2 + posY;

    posX -= (cursorX - xBefore) * (newTargetZoom / zoom - 1);
    posY -= (cursorY - yBefore) * (newTargetZoom / zoom - 1);

    targetZoom = newTargetZoom;
    zoomSlider.value = targetZoom.toFixed(2);
    smoothZoom();
  });

  // --- DOWNLOAD TANPA FRAME ---
  downloadBtn.addEventListener("click", () => {
    if (!uploadedImage) return;
    const tempCanvas = document.createElement("canvas");
    tempCanvas.width = canvas.width;
    tempCanvas.height = canvas.height;
    const tempCtx = tempCanvas.getContext("2d");

    const w = uploadedImage.width * zoom;
    const h = uploadedImage.height * zoom;
    const x = (canvas.width - w) / 2 + posX;
    const y = (canvas.height - h) / 2 + posY;

    tempCtx.drawImage(uploadedImage, x, y, w, h);

    const link = document.createElement("a");
    link.download = "foto_ijazah_4x6.png";
    link.href = tempCanvas.toDataURL("image/png");
    link.click();
  });

  frame.onload = drawCanvas;
</script>

</body>
</html>
